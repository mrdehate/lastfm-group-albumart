function getRecentArt(t){var r="http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user="+t+"&limit=2&api_key="+LASTFM_API_KEY+"&format=json";return $.getJSON(r,function(r){if(void 0===r.recenttracks||void 0===r.recenttracks.track)return 0;var e=r.recenttracks.track[0].artist["#text"],a=r.recenttracks.track[0].name,s=r.recenttracks.track[0].image[3]["#text"];if(r.recenttracks.track[0]["@attr"]&&"true"===r.recenttracks.track[0]["@attr"].nowplaying){var o="";o="<div class='entry'>",o+="<div class='user'>"+t+"</div>",o+="<div class='artistOuter'><span class='artist'>"+e+"</span></div>",o+="<div class='songOuter'><span class='song'>"+a+"</span></div>",o+="<img class='imgArt' src='"+getCoverArt(s,e)+"' /><br />",o+="</div>",$(".cover").append(o)}}),!0}function getCoverArt(t,r){var e="";return""===t?($.ajax({url:"http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist="+r+"&api_key="+LASTFM_API_KEY+"&format=json",async:!1}).done(function(t){try{e=t.artist.image[2]["#text"]}catch(r){e=BLANK_COVER_URL}}),""===e&&(e=BLANK_COVER_URL)):e=t,e}function getGroupMembers(){var t="http://ws.audioscrobbler.com/2.0/?method=group.getmembers&api_key="+LASTFM_API_KEY+"&group="+THE_GROUP+"&format=json";return $.getJSON(t,function(t){for(var r=new Array,e=0;t.members.user[e];)r[e]=t.members.user[e].name,e++;$(".cover").html("");for(var a=0;r[a];)getRecentArt(r[a]),a++;var s=new Date;$(".updateTime").html(s.getHours()+":"+s.getMinutes()+":"+s.getSeconds())}),!0}function getArtistChart(){var t="http://ws.audioscrobbler.com/2.0/?method=group.getweeklyartistchart&api_key="+LASTFM_API_KEY+"&group="+THE_GROUP+"&format=json";return $.getJSON(t,function(t){for(var r=new Array,e=0;t.weeklyartistchart.artist[e];)r[e]=t.weeklyartistchart.artist[e].name,e++;$(".artistChart ol").html("");var a;for(a=0;10>a;a++)$(".artistChart ol").append("<li>"+r[a]+"</li>")}),!0}var LASTFM_API_KEY="e63ca8d5b65415a4ee36b32260dce956",THE_GROUP="WorkForce Software",BLANK_COVER_URL="http://upload.wikimedia.org/wikipedia/commons/d/d7/No_Cover_.jpg",REFRESH_INTERVAL=6e4,DAY_REFRESH_INTERVAL=864e5;setInterval(getGroupMembers,REFRESH_INTERVAL),getArtistChart(),setInterval(getArtistChart,DAY_REFRESH_INTERVAL);